cifar100 = {
    0:  'apple',
    1:  'aquarium_fish',
    2:  'baby',
    3:  'bear',
    4:  'beaver',
    5:  'bed',
    6:  'bee',
    7:  'beetle',
    8:  'bicycle',
    9:  'bottle',
    10: 'bowl',
    11: 'boy',
    12: 'bridge',
    13: 'bus',
    14: 'butterfly',
    15: 'camel',
    16: 'can',
    17: 'castle',
    18: 'caterpillar',
    19: 'cattle',
    20: 'chair',
    21: 'chimpanzee',
    22: 'clock',
    23: 'cloud',
    24: 'cockroach',
    25: 'couch',
    26: 'crab',
    27: 'crocodile',
    28: 'cup',
    29: 'dinosaur',
    30: 'dolphin',
    31: 'elephant',
    32: 'flatfish',
    33: 'forest',
    34: 'fox',
    35: 'girl',
    36: 'hamster',
    37: 'house',
    38: 'kangaroo',
    39: 'keyboard',
    40: 'lamp',
    41: 'lawn_mower',
    42: 'leopard',
    43: 'lion',
    44: 'lizard',
    45: 'lobster',
    46: 'man',
    47: 'maple_tree',
    48: 'motorcycle',
    49: 'mountain',
    50: 'mouse',
    51: 'mushroom',
    52: 'oak_tree',
    53: 'orange',
    54: 'orchid',
    55: 'otter',
    56: 'palm_tree',
    57: 'pear',
    58: 'pickup_truck',
    59: 'pine_tree',
    60: 'plain',
    61: 'plate',
    62: 'poppy',
    63: 'porcupine',
    64: 'possum',
    65: 'rabbit',
    66: 'raccoon',
    67: 'ray',
    68: 'road',
    69: 'rocket',
    70: 'rose',
    71: 'sea',
    72: 'seal',
    73: 'shark',
    74: 'shrew',
    75: 'skunk',
    76: 'skyscraper',
    77: 'snail',
    78: 'snake',
    79: 'spider',
    80: 'squirrel',
    81: 'streetcar',
    82: 'sunflower',
    83: 'sweet_pepper',
    84: 'table',
    85: 'tank',
    86: 'telephone',
    87: 'television',
    88: 'tiger',
    89: 'tractor',
    90: 'train',
    91: 'trout',
    92: 'tulip',
    93: 'turtle',
    94: 'wardrobe',
    95: 'whale',
    96: 'willow_tree',
    97: 'wolf',
    98: 'woman',
    99: 'worm'
}

imr = {0: 'goldfish', 
       1: 'great_white_shark', 
       2: 'hammerhead', 
       3: 'stingray', 
       4: 'hen', 
       5: 'ostrich', 
       6: 'goldfinch', 
       7: 'junco', 
       8: 'bald_eagle', 
       9: 'vulture', 10: 'newt', 11: 'axolotl', 12: 'tree_frog', 13: 'iguana', 14: 'African_chameleon', 15: 'cobra', 16: 'scorpion', 17: 'tarantula', 18: 'centipede', 19: 'peacock', 20: 'lorikeet', 21: 'hummingbird', 22: 'toucan', 23: 'duck', 24: 'goose', 25: 'black_swan', 26: 'koala', 27: 'jellyfish', 28: 'snail', 29: 'lobster', 30: 'hermit_crab', 31: 'flamingo', 32: 'american_egret', 33: 'pelican', 34: 'king_penguin', 35: 'grey_whale', 36: 'killer_whale', 37: 'sea_lion', 38: 'chihuahua', 39: 'shih_tzu', 40: 'afghan_hound', 41: 'basset_hound', 42: 'beagle', 43: 'bloodhound', 44: 'italian_greyhound', 45: 'whippet', 46: 'weimaraner', 47: 'yorkshire_terrier', 48: 'boston_terrier', 49: 'scottish_terrier', 50: 'west_highland_white_terrier', 51: 'golden_retriever', 52: 'labrador_retriever', 53: 'cocker_spaniels', 54: 'collie', 55: 'border_collie', 56: 'rottweiler', 57: 'german_shepherd_dog', 58: 'boxer', 59: 'french_bulldog', 60: 'saint_bernard', 61: 'husky', 62: 'dalmatian', 63: 'pug', 64: 'pomeranian', 65: 'chow_chow', 66: 'pembroke_welsh_corgi', 67: 'toy_poodle', 68: 'standard_poodle', 69: 'timber_wolf', 70: 'hyena', 71: 'red_fox', 72: 'tabby_cat', 73: 'leopard', 74: 'snow_leopard', 75: 'lion', 76: 'tiger', 77: 'cheetah', 78: 'polar_bear', 79: 'meerkat', 80: 'ladybug', 81: 'fly', 82: 'bee', 83: 'ant', 84: 'grasshopper', 85: 'cockroach', 86: 'mantis', 87: 'dragonfly', 88: 'monarch_butterfly', 89: 'starfish', 90: 'wood_rabbit', 91: 'porcupine', 92: 'fox_squirrel', 93: 'beaver', 94: 'guinea_pig', 95: 'zebra', 96: 'pig', 97: 'hippopotamus', 98: 'bison', 99: 'gazelle', 100: 'llama', 101: 'skunk', 102: 'badger', 103: 'orangutan', 104: 'gorilla', 105: 'chimpanzee', 106: 'gibbon', 107: 'baboon', 108: 'panda', 109: 'eel', 110: 'clown_fish', 111: 'puffer_fish', 112: 'accordion', 113: 'ambulance', 114: 'assault_rifle', 115: 'backpack', 116: 'barn', 117: 'wheelbarrow', 118: 'basketball', 119: 'bathtub', 120: 'lighthouse', 121: 'beer_glass', 122: 'binoculars', 123: 'birdhouse', 124: 'bow_tie', 125: 'broom', 126: 'bucket', 127: 'cauldron', 128: 'candle', 129: 'cannon', 130: 'canoe', 131: 'carousel', 132: 'castle', 133: 'mobile_phone', 134: 'cowboy_hat', 135: 'electric_guitar', 136: 'fire_engine', 137: 'flute', 138: 'gasmask', 139: 'grand_piano', 140: 'guillotine', 141: 'hammer', 142: 'harmonica', 143: 'harp', 144: 'hatchet', 145: 'jeep', 146: 'joystick', 147: 'lab_coat', 148: 'lawn_mower', 149: 'lipstick', 150: 'mailbox', 151: 'missile', 152: 'mitten', 153: 'parachute', 154: 'pickup_truck', 155: 'pirate_ship', 156: 'revolver', 157: 'rugby_ball', 158: 'sandal', 159: 'saxophone', 160: 'school_bus', 161: 'schooner', 162: 'shield', 163: 'soccer_ball', 164: 'space_shuttle', 165: 'spider_web', 166: 'steam_locomotive', 167: 'scarf', 168: 'submarine', 169: 'tank', 170: 'tennis_ball', 171: 'tractor', 172: 'trombone', 173: 'vase', 174: 'violin', 175: 'military_aircraft', 176: 'wine_bottle', 177: 'ice_cream', 178: 'bagel', 179: 'pretzel', 180: 'cheeseburger', 181: 'hotdog', 182: 'cabbage', 183: 'broccoli', 184: 'cucumber', 185: 'bell_pepper', 186: 'mushroom', 187: 'Granny_Smith', 188: 'strawberry', 189: 'lemon', 190: 'pineapple', 191: 'banana', 192: 'pomegranate', 193: 'pizza', 194: 'burrito', 195: 'espresso', 196: 'volcano', 197: 'baseball_player', 198: 'scuba_diver', 199: 'acorn'}

# CUB = {0: '001.Black_footed_Albatross', 1: '002.Laysan_Albatross', 2: '003.Sooty_Albatross', 3: '004.Groove_billed_Ani', 4: '005.Crested_Auklet', 5: '006.Least_Auklet', 6: '007.Parakeet_Auklet', 7: '008.Rhinoceros_Auklet', 8: '009.Brewer_Blackbird', 9: '010.Red_winged_Blackbird', 10: '011.Rusty_Blackbird', 11: '012.Yellow_headed_Blackbird', 12: '013.Bobolink', 13: '014.Indigo_Bunting', 14: '015.Lazuli_Bunting', 15: '016.Painted_Bunting', 16: '017.Cardinal', 17: '018.Spotted_Catbird', 18: '019.Gray_Catbird', 19: '020.Yellow_breasted_Chat', 20: '021.Eastern_Towhee', 21: '022.Chuck_will_Widow', 22: '023.Brandt_Cormorant', 23: '024.Red_faced_Cormorant', 24: '025.Pelagic_Cormorant', 25: '026.Bronzed_Cowbird', 26: '027.Shiny_Cowbird', 27: '028.Brown_Creeper', 28: '029.American_Crow', 29: '030.Fish_Crow', 30: '031.Black_billed_Cuckoo', 31: '032.Mangrove_Cuckoo', 32: '033.Yellow_billed_Cuckoo', 33: '034.Gray_crowned_Rosy_Finch', 34: '035.Purple_Finch', 35: '036.Northern_Flicker', 36: '037.Acadian_Flycatcher', 37: '038.Great_Crested_Flycatcher', 38: '039.Least_Flycatcher', 39: '040.Olive_sided_Flycatcher', 40: '041.Scissor_tailed_Flycatcher', 41: '042.Vermilion_Flycatcher', 42: '043.Yellow_bellied_Flycatcher', 43: '044.Frigatebird', 44: '045.Northern_Fulmar', 45: '046.Gadwall', 46: '047.American_Goldfinch', 47: '048.European_Goldfinch', 48: '049.Boat_tailed_Grackle', 49: '050.Eared_Grebe', 50: '051.Horned_Grebe', 51: '052.Pied_billed_Grebe', 52: '053.Western_Grebe', 53: '054.Blue_Grosbeak', 54: '055.Evening_Grosbeak', 55: '056.Pine_Grosbeak', 56: '057.Rose_breasted_Grosbeak', 57: '058.Pigeon_Guillemot', 58: '059.California_Gull', 59: '060.Glaucous_winged_Gull', 60: '061.Heermann_Gull', 61: '062.Herring_Gull', 62: '063.Ivory_Gull', 63: '064.Ring_billed_Gull', 64: '065.Slaty_backed_Gull', 65: '066.Western_Gull', 66: '067.Anna_Hummingbird', 67: '068.Ruby_throated_Hummingbird', 68: '069.Rufous_Hummingbird', 69: '070.Green_Violetear', 70: '071.Long_tailed_Jaeger', 71: '072.Pomarine_Jaeger', 72: '073.Blue_Jay', 73: '074.Florida_Jay', 74: '075.Green_Jay', 75: '076.Dark_eyed_Junco', 76: '077.Tropical_Kingbird', 77: '078.Gray_Kingbird', 78: '079.Belted_Kingfisher', 79: '080.Green_Kingfisher', 80: '081.Pied_Kingfisher', 81: '082.Ringed_Kingfisher', 82: '083.White_breasted_Kingfisher', 83: '084.Red_legged_Kittiwake', 84: '085.Horned_Lark', 85: '086.Pacific_Loon', 86: '087.Mallard', 87: '088.Western_Meadowlark', 88: '089.Hooded_Merganser', 89: '090.Red_breasted_Merganser', 90: '091.Mockingbird', 91: '092.Nighthawk', 92: '093.Clark_Nutcracker', 93: '094.White_breasted_Nuthatch', 94: '095.Baltimore_Oriole', 95: '096.Hooded_Oriole', 96: '097.Orchard_Oriole', 97: '098.Scott_Oriole', 98: '099.Ovenbird', 99: '100.Brown_Pelican', 100: '101.White_Pelican', 101: '102.Western_Wood_Pewee', 102: '103.Sayornis', 103: '104.American_Pipit', 104: '105.Whip_poor_Will', 105: '106.Horned_Puffin', 106: '107.Common_Raven', 107: '108.White_necked_Raven', 108: '109.American_Redstart', 109: '110.Geococcyx', 110: '111.Loggerhead_Shrike', 111: '112.Great_Grey_Shrike', 112: '113.Baird_Sparrow', 113: '114.Black_throated_Sparrow', 114: '115.Brewer_Sparrow', 115: '116.Chipping_Sparrow', 116: '117.Clay_colored_Sparrow', 117: '118.House_Sparrow', 118: '119.Field_Sparrow', 119: '120.Fox_Sparrow', 120: '121.Grasshopper_Sparrow', 121: '122.Harris_Sparrow', 122: '123.Henslow_Sparrow', 123: '124.Le_Conte_Sparrow', 124: '125.Lincoln_Sparrow', 125: '126.Nelson_Sharp_tailed_Sparrow', 126: '127.Savannah_Sparrow', 127: '128.Seaside_Sparrow', 128: '129.Song_Sparrow', 129: '130.Tree_Sparrow', 130: '131.Vesper_Sparrow', 131: '132.White_crowned_Sparrow', 132: '133.White_throated_Sparrow', 133: '134.Cape_Glossy_Starling', 134: '135.Bank_Swallow', 135: '136.Barn_Swallow', 136: '137.Cliff_Swallow', 137: '138.Tree_Swallow', 138: '139.Scarlet_Tanager', 139: '140.Summer_Tanager', 140: '141.Artic_Tern', 141: '142.Black_Tern', 142: '143.Caspian_Tern', 143: '144.Common_Tern', 144: '145.Elegant_Tern', 145: '146.Forsters_Tern', 146: '147.Least_Tern', 147: '148.Green_tailed_Towhee', 148: '149.Brown_Thrasher', 149: '150.Sage_Thrasher', 150: '151.Black_capped_Vireo', 151: '152.Blue_headed_Vireo', 152: '153.Philadelphia_Vireo', 153: '154.Red_eyed_Vireo', 154: '155.Warbling_Vireo', 155: '156.White_eyed_Vireo', 156: '157.Yellow_throated_Vireo', 157: '158.Bay_breasted_Warbler', 158: '159.Black_and_white_Warbler', 159: '160.Black_throated_Blue_Warbler', 160: '161.Blue_winged_Warbler', 161: '162.Canada_Warbler', 162: '163.Cape_May_Warbler', 163: '164.Cerulean_Warbler', 164: '165.Chestnut_sided_Warbler', 165: '166.Golden_winged_Warbler', 166: '167.Hooded_Warbler', 167: '168.Kentucky_Warbler', 168: '169.Magnolia_Warbler', 169: '170.Mourning_Warbler', 170: '171.Myrtle_Warbler', 171: '172.Nashville_Warbler', 172: '173.Orange_crowned_Warbler', 173: '174.Palm_Warbler', 174: '175.Pine_Warbler', 175: '176.Prairie_Warbler', 176: '177.Prothonotary_Warbler', 177: '178.Swainson_Warbler', 178: '179.Tennessee_Warbler', 179: '180.Wilson_Warbler', 180: '181.Worm_eating_Warbler', 181: '182.Yellow_Warbler', 182: '183.Northern_Waterthrush', 183: '184.Louisiana_Waterthrush', 184: '185.Bohemian_Waxwing', 185: '186.Cedar_Waxwing', 186: '187.American_Three_toed_Woodpecker', 187: '188.Pileated_Woodpecker', 188: '189.Red_bellied_Woodpecker', 189: '190.Red_cockaded_Woodpecker', 190: '191.Red_headed_Woodpecker', 191: '192.Downy_Woodpecker', 192: '193.Bewick_Wren', 193: '194.Cactus_Wren', 194: '195.Carolina_Wren', 195: '196.House_Wren', 196: '197.Marsh_Wren', 197: '198.Rock_Wren', 198: '199.Winter_Wren', 199: '200.Common_Yellowthroat'}
CUB = {0: 'Black_footed_Albatross', 1: 'Laysan_Albatross', 2: 'Sooty_Albatross', 3: 'Groove_billed_Ani', 4: 'Crested_Auklet', 5: 'Least_Auklet', 6: 'Parakeet_Auklet', 7: 'Rhinoceros_Auklet', 8: 'Brewer_Blackbird', 9: 'Red_winged_Blackbird', 10: 'Rusty_Blackbird', 11: 'Yellow_headed_Blackbird', 12: 'Bobolink', 13: 'Indigo_Bunting', 14: 'Lazuli_Bunting', 15: 'Painted_Bunting', 16: 'Cardinal', 17: 'Spotted_Catbird', 18: 'Gray_Catbird', 19: 'Yellow_breasted_Chat', 20: 'Eastern_Towhee', 21: 'Chuck_will_Widow', 22: 'Brandt_Cormorant', 23: 'Red_faced_Cormorant', 24: 'Pelagic_Cormorant', 25: 'Bronzed_Cowbird', 26: 'Shiny_Cowbird', 27: 'Brown_Creeper', 28: 'American_Crow', 29: 'Fish_Crow', 30: 'Black_billed_Cuckoo', 31: 'Mangrove_Cuckoo', 32: 'Yellow_billed_Cuckoo', 33: 'Gray_crowned_Rosy_Finch', 34: 'Purple_Finch', 35: 'Northern_Flicker', 36: 'Acadian_Flycatcher', 37: 'Great_Crested_Flycatcher', 38: 'Least_Flycatcher', 39: 'Olive_sided_Flycatcher', 40: 'Scissor_tailed_Flycatcher', 41: 'Vermilion_Flycatcher', 42: 'Yellow_bellied_Flycatcher', 43: 'Frigatebird', 44: 'Northern_Fulmar', 45: 'Gadwall', 46: 'American_Goldfinch', 47: 'European_Goldfinch', 48: 'Boat_tailed_Grackle', 49: 'Eared_Grebe', 50: 'Horned_Grebe', 51: 'Pied_billed_Grebe', 52: 'Western_Grebe', 53: 'Blue_Grosbeak', 54: 'Evening_Grosbeak', 55: 'Pine_Grosbeak', 56: 'Rose_breasted_Grosbeak', 57: 'Pigeon_Guillemot', 58: 'California_Gull', 59: 'Glaucous_winged_Gull', 60: 'Heermann_Gull', 61: 'Herring_Gull', 62: 'Ivory_Gull', 63: 'Ring_billed_Gull', 64: 'Slaty_backed_Gull', 65: 'Western_Gull', 66: 'Anna_Hummingbird', 67: 'Ruby_throated_Hummingbird', 68: 'Rufous_Hummingbird', 69: 'Green_Violetear', 70: 'Long_tailed_Jaeger', 71: 'Pomarine_Jaeger', 72: 'Blue_Jay', 73: 'Florida_Jay', 74: 'Green_Jay', 75: 'Dark_eyed_Junco', 76: 'Tropical_Kingbird', 77: 'Gray_Kingbird', 78: 'Belted_Kingfisher', 79: 'Green_Kingfisher', 80: 'Pied_Kingfisher', 81: 'Ringed_Kingfisher', 82: 'White_breasted_Kingfisher', 83: 'Red_legged_Kittiwake', 84: 'Horned_Lark', 85: 'Pacific_Loon', 86: 'Mallard', 87: 'Western_Meadowlark', 88: 'Hooded_Merganser', 89: 'Red_breasted_Merganser', 90: 'Mockingbird', 91: 'Nighthawk', 92: 'Clark_Nutcracker', 93: 'White_breasted_Nuthatch', 94: 'Baltimore_Oriole', 95: 'Hooded_Oriole', 96: 'Orchard_Oriole', 97: 'Scott_Oriole', 98: 'Ovenbird', 99: 'Brown_Pelican', 100: 'White_Pelican', 101: 'Western_Wood_Pewee', 102: 'Sayornis', 103: 'American_Pipit', 104: 'Whip_poor_Will', 105: 'Horned_Puffin', 106: 'Common_Raven', 107: 'White_necked_Raven', 108: 'American_Redstart', 109: 'Geococcyx', 110: 'Loggerhead_Shrike', 111: 'Great_Grey_Shrike', 112: 'Baird_Sparrow', 113: 'Black_throated_Sparrow', 114: 'Brewer_Sparrow', 115: 'Chipping_Sparrow', 116: 'Clay_colored_Sparrow', 117: 'House_Sparrow', 118: 'Field_Sparrow', 119: 'Fox_Sparrow', 120: 'Grasshopper_Sparrow', 121: 'Harris_Sparrow', 122: 'Henslow_Sparrow', 123: 'Le_Conte_Sparrow', 124: 'Lincoln_Sparrow', 125: 'Nelson_Sharp_tailed_Sparrow', 126: 'Savannah_Sparrow', 127: 'Seaside_Sparrow', 128: 'Song_Sparrow', 129: 'Tree_Sparrow', 130: 'Vesper_Sparrow', 131: 'White_crowned_Sparrow', 132: 'White_throated_Sparrow', 133: 'Cape_Glossy_Starling', 134: 'Bank_Swallow', 135: 'Barn_Swallow', 136: 'Cliff_Swallow', 137: 'Tree_Swallow', 138: 'Scarlet_Tanager', 139: 'Summer_Tanager', 140: 'Artic_Tern', 141: 'Black_Tern', 142: 'Caspian_Tern', 143: 'Common_Tern', 144: 'Elegant_Tern', 145: 'Forsters_Tern', 146: 'Least_Tern', 147: 'Green_tailed_Towhee', 148: 'Brown_Thrasher', 149: 'Sage_Thrasher', 150: 'Black_capped_Vireo', 151: 'Blue_headed_Vireo', 152: 'Philadelphia_Vireo', 153: 'Red_eyed_Vireo', 154: 'Warbling_Vireo', 155: 'White_eyed_Vireo', 156: 'Yellow_throated_Vireo', 157: 'Bay_breasted_Warbler', 158: 'Black_and_white_Warbler', 159: 'Black_throated_Blue_Warbler', 160: 'Blue_winged_Warbler', 161: 'Canada_Warbler', 162: 'Cape_May_Warbler', 163: 'Cerulean_Warbler', 164: 'Chestnut_sided_Warbler', 165: 'Golden_winged_Warbler', 166: 'Hooded_Warbler', 167: 'Kentucky_Warbler', 168: 'Magnolia_Warbler', 169: 'Mourning_Warbler', 170: 'Myrtle_Warbler', 171: 'Nashville_Warbler', 172: 'Orange_crowned_Warbler', 173: 'Palm_Warbler', 174: 'Pine_Warbler', 175: 'Prairie_Warbler', 176: 'Prothonotary_Warbler', 177: 'Swainson_Warbler', 178: 'Tennessee_Warbler', 179: 'Wilson_Warbler', 180: 'Worm_eating_Warbler', 181: 'Yellow_Warbler', 182: 'Northern_Waterthrush', 183: 'Louisiana_Waterthrush', 184: 'Bohemian_Waxwing', 185: 'Cedar_Waxwing', 186: 'American_Three_toed_Woodpecker', 187: 'Pileated_Woodpecker', 188: 'Red_bellied_Woodpecker', 189: 'Red_cockaded_Woodpecker', 190: 'Red_headed_Woodpecker', 191: 'Downy_Woodpecker', 192: 'Bewick_Wren', 193: 'Cactus_Wren', 194: 'Carolina_Wren', 195: 'House_Wren', 196: 'Marsh_Wren', 197: 'Rock_Wren', 198: 'Winter_Wren', 199: 'Common_Yellowthroat'}

def extract_leaf_groups(taxonomy, parent_category=None):
    """
    Recursively traverses the taxonomy and extracts sub-groups at the leaf level.
    
    :param taxonomy: The taxonomy dictionary.
    :param parent_category: The parent category (used for maintaining the hierarchy).
    :return: A list of dictionaries representing leaf-level sub-groups.
    """
    leaf_groups = []

    # Traverse the taxonomy
    for category, subcategory in taxonomy.items():
        # If the subcategory is a dictionary, recurse further
        if isinstance(subcategory, dict):
            leaf_groups.extend(extract_leaf_groups(subcategory, category))
        # If the subcategory is a list (i.e., leaf nodes), collect the current category
        elif isinstance(subcategory, list):
            leaf_groups.append({
                'group': category,
                'parent': parent_category,
                'labels': subcategory
            })

    return leaf_groups


def ID_to_name(ID_2D_list, map):
    label_2D_list = [[map[name] for name in sublist] for sublist in ID_2D_list]
    one_d_list = [item for sublist in label_2D_list for item in sublist]
    return one_d_list #label_2D_list

def name_to_ID(names_2D_list, dataset):
    label_to_ID = {label: ID for ID, label in dataset.items()}
    # print(dataset)
    # print(label_to_ID)
    ids_2D_list = [[label_to_ID[name] for name in sublist] for sublist in names_2D_list]
    return ids_2D_list

def leaf_group_to_llist(taxonomy, dataset_name='Split-CIFAR100'):
    # Extract leaf-level sub-groups
    leaf_groups = extract_leaf_groups(taxonomy)
    # Reverse the dictionary
    
    llist = []

    # Example of how to use the extracted leaf groups
    for group in leaf_groups:
        # print(f"Group: {group['group']} (Parent: {group['parent']})")
        # print(f"Labels: {group['labels']}\n")
        llist.append(group['labels'])
        
    
    if dataset_name == 'Split-CIFAR100':
        dataset = cifar100
    elif dataset_name == 'Split-Imagenet-R':
        dataset = imr
    elif dataset_name == 'Split-CUB200':
        dataset = CUB
    else:
        print('Have not been supported')
        exit()
        
    llist = name_to_ID(llist, dataset)
        
    return llist

if __name__ == '__main__':
    # ID = [[66, 187, 101, 193, 111, 121, 13, 2, 64, 44, 136, 170, 128, 76, 158, 167, 45, 130, 30, 3], 
    #            [159, 15, 42, 126, 186, 162, 47, 110, 5, 194, 37, 122, 12, 36, 153, 69, 61, 195, 32, 172], 
    #            [171, 60, 10, 144, 160, 52, 125, 106, 73, 113, 105, 95, 103, 145, 43, 0, 161, 192, 16, 80], 
    #            [102, 38, 156, 176, 135, 78, 115, 19, 14, 177, 146, 179, 65, 84, 165, 46, 104, 79, 54, 196], 
    #            [85, 118, 109, 133, 142, 33, 18, 140, 123, 175, 63, 83, 148, 100, 155, 72, 27, 184, 112, 51], 
    #            [174, 4, 29, 183, 99, 98, 131, 124, 198, 134, 178, 120, 34, 48, 169, 138, 149, 132, 127, 21], 
    #            [81, 77, 9, 82, 164, 119, 89, 68, 53, 90, 94, 41, 93, 116, 199, 157, 25, 180, 147, 74], 
    #            [58, 152, 17, 49, 92, 75, 141, 20, 96, 31, 137, 117, 11, 67, 88, 91, 24, 97, 182, 190], 
    #            [86, 181, 39, 168, 87, 185, 40, 1, 71, 150, 114, 56, 107, 191, 166, 50, 143, 197, 154, 129], 
    #            [59, 55, 23, 7, 8, 108, 151, 22, 139, 173, 26, 188, 35, 57, 62, 70, 189, 6, 28, 163]]
    
    # ID = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19], [20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39], [40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59], [60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79], [80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99], [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119], [120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139], [140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159], [160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179], [180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199]]
    
    # for i in range(len(ID)):
    #     ids = ID[:i+1]
    #     # print(ids)
    #     print(i, '-'*50)
    #     # exit()
    #     kk = ID_to_name(ids, CUB)
    #     print(f"T{i}={kk}")
    
    CUB_cleaned = {k: v.split('.', 1)[1] if '.' in v else v for k, v in CUB.items()}
    print(CUB_cleaned)
    # # Example taxonomy
    # taxonomy = {
    #     "Natural": {
    #         "Plants": {
    #             "Fruits": ["apple", "orange", "pear", "sweet_pepper"],
    #             "Flowers": ["orchid", "poppy", "rose", "sunflower", "tulip"],
    #             "Trees": ["maple_tree", "oak_tree", "palm_tree", "pine_tree", "willow_tree"]
    #         },
    #         "Animals": {
    #             "Mammals": {
    #                 "Four-legged": ["bear", "beaver", "camel", "cattle", "chimpanzee", "elephant",
    #                                 "fox", "hamster", "kangaroo", "leopard", "lion", "mouse", "otter",
    #                                 "porcupine", "possum", "rabbit", "raccoon", "seal", "skunk", "squirrel",
    #                                 "tiger", "wolf"],
    #                 "Two-legged": ["baby", "boy", "girl", "man", "woman"]
    #             },
    #             "Insects": ["bee", "beetle", "butterfly", "caterpillar", "cockroach", "spider"],
    #             "Aquatic": ["aquarium_fish", "crocodile", "dolphin", "flatfish", "lobster", "ray", "shark", "trout", "whale"],
    #             "Reptiles": ["dinosaur", "lizard", "snake", "turtle"],
    #             "Others": ["snail", "worm"]
    #         }
    #     },
    #     "Man-Made": {
    #         "Vehicles": {
    #             "Wheeled": ["bicycle", "bus", "motorcycle", "pickup_truck", "tractor", "train", "streetcar"],
    #             "Air": ["rocket"],
    #             "Water": []
    #         },
    #         "Structures": {
    #             "Buildings": ["castle", "house", "skyscraper"],
    #             "Bridges": ["bridge"],
    #             "Others": ["road"]
    #         },
    #         "Objects": {
    #             "Furniture": ["bed", "chair", "couch", "table", "wardrobe"],
    #             "Appliances": ["television"],
    #             "Containers": ["bottle", "bowl", "can", "cup", "plate"],
    #             "Instruments": ["clock", "keyboard", "lamp", "telephone"],
    #             "Tools": ["lawn_mower", "tank"]
    #         }
    #     },
    #     "Environment": {
    #         "Natural Features": ["cloud", "forest", "mountain", "plain", "sea"]
    #     }
    # }

    # # Extract leaf-level sub-groups
    # leaf_groups = extract_leaf_groups(taxonomy)

    # # Example of how to use the extracted leaf groups
    # for group in leaf_groups:
    #     print(f"Group: {group['group']} (Parent: {group['parent']})")
    #     print(f"Labels: {group['labels']}\n")